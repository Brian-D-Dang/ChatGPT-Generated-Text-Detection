Edit: I didn't expect this to get such a response. I've replied to some things and gave out some deltas, but as I won't have time to address everything, I'll simply post the code I wrote that helped me get it working. I think the relevant parts of this are the lines 30-41 (it's untested, btw, just a rough draft). This part handles the loading of the files from the server. This part is used for fixing the problems with the server encoding. This part just tells the client to not fire any more events. This part is used for handling the client events. This part is used to send all the files from the client's cache to the server. This part is used to send the data for the files from the server to the client. This part is used to handle the special case of the last file not having the expected length. This part handles the last file. This part is used to send the last file. This part is used to send all the files from the client to the server. This part is used to send all the files from the server to the client. This part is used to send the files from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the file descriptor. This part is used to send the file descriptor and data from the client to the server. This part is used to send the file descriptor and data from the server to the client. This part is used to send the files descriptor. This part is used to send the files descriptor. This part is used to send the files descriptor. This part is used to send the file descriptor. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the data from the server to the client. This part is used to send the data from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the data from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the server to the client. This part is used to send the data from the server to the client. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used to send the data from the client to the server. This part is used